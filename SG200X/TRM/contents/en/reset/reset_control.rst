Reset Control
-------------

There are three levels of reset management modules inside the chip to manage the reset of the entire chip, subsystems, and various functional modules.

.. _diagram_reset_block:
.. figure:: ../../../../media/image6.png
	:align: center

	Reset management module block diagram

The Reset Ctrl Level 1 circuit is responsible for the system power-on reset function. The power-on reset (POR) is generated by the real-time clock module in conjunction with the global power management and crystal timing. For details, refer to the section :ref:`section_rtc`. Level 1 Reset can be triggered in the following ways:

- Power on reset

- Overheat protection reset

- Watchdog reset: When RCT_CTRL0.hw_wdg_rst_en is 1 (see :ref:`table_rtc_ctrl0`) and bit[0] of sys_ctrl_reg.reg_sw_root_reset_en is 0 (see :ref:`table_sys_ctrl_reg`), the watchdog timer times out and triggers a system reset.

The Reset Ctrl Level 2 circuit is responsible for generating a System Hard Reset, which performs a hard reset on the chip globally including subsystems and functional modules. Level 2 Reset can be triggered in the following ways:

- Watchdog reset: When bit[0] of sys_ctrl_reg.reg_sw_root_reset_en is 1 (see :ref:`table_sys_ctrl_reg`), the watchdog timer times out and triggers a system reset.

- External reset pin (RSTN), which has beuilt-in debounce circuit, RSTN high and low level effective signals must reach 6.56ms.

The Reset Ctrl Level 3 circuit is responsible for providing the reset configuration register (Reset CRG) corresponding to the soft reset control. For details, refer to :ref:`section_reset_configure_registers`. It includes:

- System soft reset: Reset the entire chip, except for a few circuits and RTC internal circuits.

- Processor subsystem reset: Resets the processor and processor subsystem. Programming of register SOFT_CPUAC_RSTN can soft reset the processor and subsystem. After writing 0 to the configuration register, the reset controller will wait for a 24us delay before triggering the corresponding processor reset. During this period, the processor should end access to the bus to avoid the bus hanging after reset. After triggering the reset, the corresponding reset signal will last for 8us and then be automatically released. The processor and processor subsystem will complete the reset and start booting.

- Functional subsystem and modules reset: Reset each functional subsystem and functional modules. Programming of register SOFT_RSTN_0 ~ 3 can soft reset each functional module. The reset configuration is active low, and the reset signal will not be cleared automatically. Therefore, after the software configures the corresponding register to 0 to trigger the reset, it also needs to be configured to 1 to release the reset. Before resetting, make sure that the built-in DMA of each functional module and functional subsystem to the bus and the processor to the module are idle. Otherwise, the reset will fail and the system may hang.
