Reset Control
-------------

.. _diagram_reset_block:
.. figure:: ../../../../media/image6.png
	:align: center

	Reset management module block diagram

Power On Reset
~~~~~~~~~~~~~~

A Power-On-Reset (POR) is generated by the real-time clock module in conjunction with global power management and crystal timing. See section :ref:`section_rtc` for details.

System Hard Reset
~~~~~~~~~~~~~~~~~

System Hard Reset is generated by Reset Ctrl Level2. It performs a hard reset on the global chip including subsystems and functional modules. The source is from the following channels:

- Power on reset

- Watchdog reset

- Overheat protection reset

- External reset pin (RSTN)

    - Built-in debounce circuit, RSTN high and low level effective signals must reach 6.56ms.

Soft Reset
~~~~~~~~~~

Soft Reset control is implemented by Reset Ctrl Level3 by configuring the corresponding reset configuration register (Reset CRG), including:

- System soft reset: Reset the entire chip, except for a few circuits and RTC internal circuits.

- Processor subsystem reset: Resets the processor and processor subsystem.

- Functional subsystem reset: Reset each functional subsystem and functional modules.

- Function module reset: Reset each function module.

Processor subsystem soft reset
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Programming of register SOFT_AC_RSTN_0 can soft reset the processor and subsystem. After writing 0 to the configuration register, the reset controller will wait for a 24us delay before triggering the corresponding processor reset. During this period, the processor should end access to the bus to avoid the bus hanging after reset. After triggering the reset, the corresponding reset signal will last for 8us and then be automatically released. The processor and processor subsystem will complete the reset and start booting.

Soft reset of functional subsystems and functional modules
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Programming of register SOFT_RSTN_0 ~ 3 can soft reset each functional module. The reset configuration is active low, and the reset signal will not be cleared automatically. Therefore, after the software configures the corresponding register to 0 to trigger the reset, it also needs to be configured to 1 to release the reset. Before resetting, make sure that the built-in DMA of each functional module and functional subsystem to the bus and the processor to the module are idle. Otherwise, the reset will fail and the system may hang.
