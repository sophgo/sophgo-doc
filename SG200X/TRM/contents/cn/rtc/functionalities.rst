功能描述
--------

RTC 是芯片内一个独立供电的恒电模块，当 RTC 首次上电时，内部 POR 模块产生一个低电平脉冲, 32KHz 振荡器开始起振。POR 低电平维持时间大于 13 个 32KHz 时钟周期, RTC 进入初始状态。当状态机检测到电池电压处于正常状态，则开始依默认值时序完成芯片上电流程并解除系统复位信号。软件在首次开机后需要将 RTC 初始化，并配置计数初始值。当系统要执行关机或进入休眠时，可通过配置系统控制寄存器 (RTC_CTRL) 触发 RTC 状态机依配置时序完成芯片下电流程。

当芯片处于下电关机或休眠状态时，只要维持 RTC 供电就会持续工作状态，以保存必要的软件代码或用户数据于 SRAM 和信息寄存器 (RTC_INFO0 ~ RTC_INFO3, RTC_NOPOR_INFO0 ~ RTC_NOPOR_INFO3); 计数器会持续计数，同时也会侦测按键是否触发芯片开机或自休眠唤醒, 当收到触发则会由状态机依配置时序完成芯片上电流程并解除系统复位信号。处理器内核在重启后, 软件可藉由回读先前写入信息寄存器的内容来判断芯片状态, RTC 内也提供两个状态寄存器 (RTC_ST_ON_REASON, RTC_ST_OFF_REASON)，分别记录前一次芯片下电或上电、复位的触发条件，提供软件更细致内容，例如是否曾经发生非预期事件：强制复位、芯片过热或电池/电源脱落等。另外，当 RTC 收到 Watchdog 时，会触发状态机依配置时序发出系统复位信号，将芯片重启。

RTC 的计数时钟采用 32KHz 时钟，运行基于一个 32-bit 的加法计数器提供秒计数，计数初值由寄存器 RTC_SET_SEC_CNTR_VALUE 载入。软件可通过寄存器 RTC_SEC_CNTR_VALUE 回读秒数值，转换为具体的年、月、日、时、分。

32KHz 时钟及秒脉冲周期可经由软件流程做校准 (calibration)，或开启硬件模块周期性执行自动校准。

软件可通过配置 32-bit 寄存器 RTC_ALARM_TIME, 并将 RTC_ALARM_ENABLE 写 1 使能 Alarm, 当秒计数值 RTC_SEC_CNTR_VALUE 递加到与 RTC_ALARM_TIME 值相等时, RTC 将产生报警中断。中断状态会维持直到 RTC_ALARM_ENABLE 写 0。

此外 RTC 提供电池低压检测, 当电池电压低于一定水平时, RTC 将产生中断，软件收到低压中断后，可即时执行关机程序并触发 RTC 完成下电流程，以防止系统发生异常错误。
